**FFLUSH(3)          BSD库函数手册      FFLUSH(3)**



**名称**

   **fflush, fpurge -- ```刷新一个流```**



**库**

   **C标准库 (libc, -lc)**



**概要**

   `#include <stdio.h>`

   `int`

   `fflush(FILE *stream);`

   `int`

   `fpurge(FILE *stream);`



**描述**

​        函数**fflush()**根据缓冲I/O来**同步给定流的状态**。对于**输出或更新流**，fflush函数通过流底层的**写函数**<u>写入</u>所有的**缓冲数据**。对于**输入流**，fflush函数通过流底层的**seek函数**查找当前文件的**位置指针**。流的打开状态不受影响。

​        如果参数stream为NULL，则fflush()会刷新所有打开的流。

​		函数fpurge()**清除**给定流中缓冲的任何**输入或输出**。对**输出流**来说看，fpurge()丢弃了```所有未写入```的**输出**。对于**输入流**，fpurge()丢弃了任何```从底层对象读取```但还```未通过getc(3)获取```的**输入**;这包括通过ungetc(3)推回(pushed back)的任何文本。

**返回值**

​        一旦执行成功，就会```返回零```。否则，会```返回EOF```，并设置全局变量**errno**来```指示错误```。

**错误**

​		**[EBADF]**   参数stream不是一个打开的流。

​		函数**fflush()**也可能失败，且当出现为例程**write(2)**和**lseek(2)**指定的所有错误时，会为它们设置**errno**。

**另请参阅**

​		**write(2), fclose(3), fopen(3), lseek(2), setbuf(3)**

**标准**

​		函数fflush()遵循**ISO/IEC 9899:1990 (‘’ISO C90'')**这一标准和《单一UNIX规范第三版》(''SUSv3'')。

**BSD              2019年8月1日               BSD**